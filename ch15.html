<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <title>Getting Started with Computer Vision</title>
  <link href="theme/html/stylesheets/styles.css" media="all" rel="stylesheet" type="text/css"/>
  <link href="theme/html/stylesheets/shared.css" media="all" rel="stylesheet" type="text/css"/>
  <link href="theme/html/stylesheets/syntax.css" media="all" rel="stylesheet" type="text/css"/>

   <script type="text/javascript" src="theme/html/javascripts/jquery.js"> </script>
   <script type="text/javascript" src="theme/html/javascripts/bootstrap.min.js"> </script>
   <script type="text/javascript" src="theme/html/javascripts/disqus.js"> </script>

   <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"/>

   <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1"/>


</head>
<body>
	
	
 <a href="https://github.com/odewahn/devops-field-guide"><img style="z-index: 999999999; position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Discuss on GitHub"/></a>
 
  <div class="navbar">
    <div class="container">
      <img style="margin:12px; height: 25px" src="theme/html/assets/logo-white.svg"/>
      <ul class="nav pull-left">
        <li id="dropdown-1"/>
      </ul>
    </div>
    <div class="subhead">
    </div>
  </div>


  <div class="container" id="main">
	
      <div class="row-fluid down40">	
         <div class="span8">		
            <section data-type="chapter" data-pdf-bookmark="Chapter 15. Track All the Things" id="idp620304">
<h1>Track All the Things</h1>

<section data-type="sect1" data-pdf-bookmark="Face Detection" id="idp621280">
<h1>Face Detection</h1>

<p><em>Detecting faces in images is one of the most ubiquitous applications of computer vision. We see it in our digital cameras for autofocus, on our social networks to identify our friends, in public surveillance systems, and many other places. In this project, we’ll learn how to detect faces using OpenCV. We’ll see a little bit about how the face detection process works, how it can fail, and how we can apply it to detect other things besides just faces.</em></p>
<iframe src="http://player.vimeo.com/video/69907695" width="1000" height="562" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""> </iframe>

<p><em>Video and images from Adam Harvey’s <a href="http://cvdazzle.com">CV Dazzle</a> used with permission. Clock photo by <a href="http://www.flickr.com/photos/jaqian/7292320/">jaqian</a> and pedestrian photo by <a href="http://www.flickr.com/photos/gandalfcunningham/2527870434/">gandalphcunningham</a>.</em></p>
<section data-type="sect2" data-pdf-bookmark="Video Summary" id="idp624816">
<h2>Video Summary</h2>

<ul>
<li>Face detection in OpenCV is easy to use.</li>
<li>It is necessary to learn about how it is implemented in order to use it effectively and understand its limitations.</li>
<li>OpenCV’s face detector uses the Viola-Jones algorithm, originally introduced in the 2001 paper <a href="http://www.merl.com/papers/docs/TR2004-043.pdf">Rapid Object Detection Using a Boosted
Cascade of Simple Features</a>.</li>
<li>Viola-Jones works by matching a defined series of patterns of light and dark rectangles to different areas of the image at different scales.</li>
<li>Faces have a consistent arrangement of highlights and shadows based on how light falls on the facial features.</li>
<li>Viola-Jones can be trained to recognize these patterns.</li>
<li>The training process requires a large set of input images and takes a long time and a lot of computing resources.</li>
<li>The training process produces a “cascade” file (usually stored as XML), which can be loaded into OpenCV for realtime detection.</li>
<li>The most commonly used cascade is for frontal faces.</li>
<li>Artist Adam Harvey’s <a href="http://cvdazzle.com">CV Dazzle</a> project consists of makeup designed to camouflage the wearer from Viola-Jones face detection.</li>
<li>CV Dazzle works by introducing dark and light patches onto the face where the Viola-Jones frontal face cascade does not expect them to be.</li>
<li>Harvey produced <a href="https://vimeo.com/34545827">visualizations</a> that illustrate how the Viola-Jones detection process works.</li>
<li>For more about CV Dazzle and how the Viola-Jones algorithm works, see <a href="http://makematics.com/research/viola-jones/">this Makematics interview with Adam Harvey</a>.</li>
<li>Viola-Jones can detect multiple faces.</li>
<li>Find more faces will slow down the processing of each image.</li>
<li>Viola-Jones can also be used to detect other objects than faces.</li>
<li>Researchers have created cascades for noses, ears, pedestrians, clock faces, and many other objects.</li>
</ul>
</section>
<section data-type="sect2" data-pdf-bookmark="The Politics of Face Detection" id="idp626096">
<h2>The Politics of Face Detection</h2>

<p>Face detection brings out strong, sometimes contradictory, reactions in people. It triggers our fear of being observed, of surveillance by governments, corporations, and others figures of authority. In response to these fears, there’s something of a tradition of creative projects that produce inventive ways of avoiding face detection.</p>
<p>Beyond Adam Harvey’s CV Dazzle, demonstrated above, artists <a href="http://kylemcdonald.net">Kyle McDonald</a> and <a href="http://datenform.de/">Aram Bartholl</a> of the <a href="http://fffff.at/">F.A.T Lab collective</a> created a video on "<a href="http://fffff.at/how-to-avoid-facial-recognition/">How To Avoid Facial Recognition</a>"</p>
<iframe src="http://player.vimeo.com/video/41861212" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""> </iframe> 

<p>Very different in style and tone from CV Dazzle, the combination of humor and punk rock attitude in this video simultaneously expresses and mocks the idea of face detection as a form of technological oppression. </p>
<p>At the end of the video McDonald and Bartholl demonstrate that most face detection systems fail if the face is tilted by more than 15 degrees or so. This is a practical concern when using OpenCV’s face detection functions. It can be overcome by rotating the image before processing, but that technique is computationally expensive and rarely done.</p>
<p>In addition to the fear of being observed by face detection systems, there’s a different kind of fear in being invisible to them.</p>
<p>In 2009, two employees of a computer store uploaded a video called <a href="http://www.youtube.com/watch?v=t4DT3tQqgRM">HP Computers are Racist</a> in which they demonstrated an HP MediaSmart computer failing to track the face of a black man, but succeeding on a white woman.</p>
<iframe width="420" height="315" src="//www.youtube.com/embed/t4DT3tQqgRM" frameborder="0" allowfullscreen=""> </iframe>

<p><a href="http://www.pcmag.com/article2/0,2817,2357429,00.asp">HP responded</a> to the video by explaining the technical roots of the problem and insisting it wasn’t intentional:</p>
<blockquote>
<p>“The technology we use is built on standard algorithms that measure the difference in intensity of contrast between the eyes and the upper cheek and nose. We believe that the camera might have difficulty ’seeing’ contrast in conditions where there is insufficient foreground lighting.”</p>
</blockquote>
</section>
<section data-type="sect2" data-pdf-bookmark="Quiz" id="idp643600">
<h2>Quiz</h2>

<p>Q: Which of the following conditions will not make OpenCV face detection run faster: A) A smaller input image. B) Fewer faces present in the image. C) Good lighting.</p>
<p class="pop btn" href="#" rel="popover" title="Answer" data-content="C, good lighting.">Reveal the Answer</p>

<p>Q: Is it easier to detect objects with a cascade or to train a new cascade?</p>
<p class="pop btn" href="#" rel="popover" title="Answer" data-content="Detect. Training is difficult and computationally expensive.">Reveal the Answer</p>

<p>Q: What is the minimum angle of orientation that will cause the frontal face cascade to fail to detect the face?</p>
<p class="pop btn" href="#" rel="popover" title="Answer" data-content="15 degrees.">Reveal the Answer</p>

</section>
<section data-type="sect2" data-pdf-bookmark="Code" id="idp657184">
<h2>Code</h2>

<section data-type="sect3" data-pdf-bookmark="Important Functions" id="idp666752">
<h3>Important Functions</h3>

<ul>
<li><code>opencv.loadCascade()</code> - Setup for face tracking (or other cascade-based tracking).</li>
<li><code>OpenCV.CASCADE_FRONTALFACE_ALT</code> - A constant referring to the standard cascade for detecting faces. Pass this to <code>opencv.loadCascade()</code> to setup for face detection.</li>
<li><code>opencv.detect()</code> - Detect objects in the current image based on the configured cascade. Returns an array of Rectangle objects.</li>
</ul>
</section>
<section data-type="sect3" data-pdf-bookmark="Browse the Code" id="idp671008">
<h3>Browse the Code</h3>

<ul>
<li>Detect faces in video</li>
<li>Scaling trick to do it faster</li>
<li>Detect clocks with a different cascade</li>
</ul>
</section>
</section>
</section>
</section>
         </div>
         <div class="span4">
	  <h2>Subscribe by email</h2>
	  <div id="mc_embed_signup">
	    <form action="http://herokuapp.us7.list-manage1.com/subscribe/post?u=5fec48c7e90ffefc48144196d&amp;id=7f2979d0d9" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank">
	      <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address"/>
	      <br/>
              <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"/>
	      <div style="position: absolute; left: -5000px;">
	        <input type="text" name="b_5fec48c7e90ffefc48144196d_7f2979d0d9" tabindex="-1" value=""/>
	      </div>
	    </form>
	  </div>


	   <h2>Key Themes</h2>
              <nav data-type="toc" id="idp88192"><ol><li data-type="sect1"><a href="#idp4080">Introduction</a><ol>



<li data-type="sect1"><a href="#idm2129264">World of Filters</a></li>
<li data-type="sect1"><a href="#idp68736">Calibrate</a></li>
<li data-type="sect1"><a href="#idp75152">Track All The Things</a></li>
<li data-type="sect1"><a href="#idp77856">The Shape of Things</a></li>
<li data-type="sect1"><a href="#idp356832">Training Program</a></li>
<li data-type="sect1"><a href="#idp360208">Projects</a></li>
</ol></li><li data-type="chapter"><a href="ch01.html#idp365088">Getting Started with Computer Vision</a><ol>





<li data-type="sect1"><a href="ch01.html#idp372304">Contributions Welcome</a></li>
<li data-type="sect1"><a href="ch01.html#idp370832">Format</a></li>
</ol></li><li data-type="part"><a href="part01.html#idp375632">Filters</a></li><li data-type="chapter"><a href="ch02.html#idp378224">World of Filters</a><ol>


<li data-type="sect1"><a href="ch02.html#idp379424">Adaptive Threshold</a></li>
<li data-type="sect1"><a href="ch02.html#idp380400">Related Functions</a></li>
</ol></li><li data-type="chapter"><a href="ch03.html#idp385504">World of Filters</a><ol>


<li data-type="sect1"><a href="ch03.html#idp386272">Basic Output</a></li>
</ol></li><li data-type="chapter"><a href="ch04.html#idp390304">World of Filters</a><ol>


<li data-type="sect1"><a href="ch04.html#idp395376">Blur</a><ol>




<li data-type="sect2"><a href="ch04.html#idp404512">Blur Strength and Direction - Convolutions and Kernels</a></li>
<li data-type="sect2"><a href="ch04.html#idp405456">Color Images</a></li>
<li data-type="sect2"><a href="ch04.html#idp427696">Parameters</a></li>
<li data-type="sect2"><a href="ch04.html#idp433936">Related Functions</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch05.html#idp438496">World of Filters</a><ol>


<li data-type="sect1"><a href="ch05.html#idp439440">Brightness and Contrast</a></li>
</ol></li><li data-type="chapter"><a href="ch06.html#idp440704">World of Filters</a><ol>


<li data-type="sect1"><a href="ch06.html#idp441744">Dilate and Erode</a></li>
</ol></li><li data-type="chapter"><a href="ch07.html#idp442160">World of Filters</a><ol>


<li data-type="sect1"><a href="ch07.html#idp460272">Edge Detection</a><ol>



<li data-type="sect2"><a href="ch07.html#idp454640">Canny Edge Detection</a></li>
<li data-type="sect2"><a href="ch07.html#idp456400">Sobel Edge Detection</a></li>
<li data-type="sect2"><a href="ch07.html#idp468464">Scharr Edge Detection</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch08.html#idp469520">World of Filters</a><ol>


<li data-type="sect1"><a href="ch08.html#idp474624">Histogram Equalization</a></li>
</ol></li><li data-type="chapter"><a href="ch09.html#idp491968">World of Filters</a><ol>


<li data-type="sect1"><a href="ch09.html#idp483232">In Range</a><ol>








<li data-type="sect2"><a href="ch09.html#idp500016">Use with Color Images and the Hue Channel</a></li>
<li data-type="sect2"><a href="ch09.html#idp501296">Parameters</a></li>
<li data-type="sect2"><a href="ch09.html#idp505392">Related Material</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch10.html#idp512192">World of Filters</a><ol>


<li data-type="sect1"><a href="ch10.html#idp513040">Region of Interest</a><ol>





<li data-type="sect2"><a href="ch10.html#idp521456">Combined with Histogram Equalization</a></li>
<li data-type="sect2"><a href="ch10.html#idp525584">Parameters</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch11.html#idp527184">World of Filters</a><ol>


<li data-type="sect1"><a href="ch11.html#idp524080">Threshold</a><ol>







<li data-type="sect2"><a href="ch11.html#idp535552">Related Functions</a></li>
<li data-type="sect2"><a href="ch11.html#idp536720">Parameters</a></li>
<li data-type="sect2"><a href="ch11.html#idp539904">Code</a></li>
</ol></li>
</ol></li><li data-type="part"><a href="part02.html#idp541856">Tracking</a></li><li data-type="chapter"><a href="ch12.html#idp543376">Track All the Things</a><ol>


<li data-type="sect1"><a href="ch12.html#idp544384">Background Subtraction</a><ol>



<li data-type="sect2"><a href="ch12.html#idp546224">Video Script</a></li>
<li data-type="sect2"><a href="ch12.html#idp549072">Video Summary</a></li>
<li data-type="sect2"><a href="ch12.html#idp550800">Quiz</a></li>
<li data-type="sect2"><a href="ch12.html#idp565232">Code</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch13.html#idp572000">Track All The Things</a><ol>


<li data-type="sect1"><a href="ch13.html#idp572880">Track the Brightest Point</a><ol>





<li data-type="sect2"><a href="ch13.html#idp575216">Video Summary</a></li>
<li data-type="sect2"><a href="ch13.html#idp593520">Code</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch14.html#idp604304">Track All the Things</a><ol>


<li data-type="sect1"><a href="ch14.html#idp605936">Finding Contours and Lines</a><ol>


<li data-type="sect2"><a href="ch14.html#idp606784">Video Script</a></li>
<li data-type="sect2"><a href="ch14.html#idp609584">Video Summary</a></li>
<li data-type="sect2"><a href="ch14.html#idp610800">Quiz</a></li>
<li data-type="sect2"><a href="ch14.html#idp612304">Code</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch15.html#idp620304">Track All the Things</a><ol>


<li data-type="sect1"><a href="ch15.html#idp621280">Face Detection</a><ol>






<li data-type="sect2"><a href="ch15.html#idp624816">Video Summary</a></li>
<li data-type="sect2"><a href="ch15.html#idp626096">The Politics of Face Detection</a></li>
<li data-type="sect2"><a href="ch15.html#idp643600">Quiz</a></li>
<li data-type="sect2"><a href="ch15.html#idp657184">Code</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch16.html#idp674528">Track All the Things</a><ol>


<li data-type="sect1"><a href="ch16.html#idp675408">Color Tracking in HSV Color Space</a><ol>





<li data-type="sect2"><a href="ch16.html#idp683024">Video Summary</a></li>
<li data-type="sect2"><a href="ch16.html#idp688592">Quiz</a></li>
<li data-type="sect2"><a href="ch16.html#idp696240">Code</a></li>
</ol></li>
</ol></li></ol></nav>
	   <div class="navigation">
	      <ul>
	        <li class="prev"><a href="ch14.html">Previous</a></li>
	        <li class="next"><a href="ch16.html">Next</a></li>
	      </ul>
	   </div>	   
	 </div>
      </div>

      <div class="row-fluid">
	 <div class="span12">
            <div id="disqus_thread"/>
	 </div>
      </div>


  </div>

  <footer>
    <div class="container">
      <div class="row-fluid">
        <div class="span4">
          <span class="logo"/>
          <p>© 2014, O'Reilly Media, Inc.</p>
          <p class="small">All trademarks and registered trademarks appearing on oreilly.com are the property of their respective owners.</p>
        </div>
        <div class="span4">
          <ul>
            <li>Legal</li>
            <li><a href="/tos">Terms of Service</a></li>
            <li><a href="http://oreilly.com/oreilly/privacy.csp">Privacy Policy</a></li>
          </ul>
        </div>
        <div class="span4">
	   <a class="btn btn-medium btn-info" href="https://github.com/odewahn/devops-field-guide/issues" target="_blank">Feedback</a>
	</div>
      </div>
    </div>
  </footer>


</body>
</html>
